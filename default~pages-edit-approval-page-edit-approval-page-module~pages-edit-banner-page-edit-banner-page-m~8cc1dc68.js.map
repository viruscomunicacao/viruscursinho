{"version":3,"sources":["webpack:///./src/app/roles/admin-area/angular-services/media.service.ts","webpack:///./src/app/roles/admin-area/components/media-selector/media-selector.component.css","webpack:///./src/app/roles/admin-area/components/media-selector/media-selector.component.html","webpack:///./src/app/roles/admin-area/components/media-selector/media-selector.component.ts","webpack:///./src/app/roles/admin-area/components/media-selector/media-selector.module.ts"],"names":[],"mappings":"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","file":"default~pages-edit-approval-page-edit-approval-page-module~pages-edit-banner-page-edit-banner-page-m~8cc1dc68.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { of } from 'rxjs';\r\nimport { catchError, tap } from 'rxjs/operators';\r\n\r\nimport { LoggerService } from './logger.service';\r\nimport { AuthService } from './auth.service';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MediaService {\r\n\r\n  private apiURL: string = `${environment.apiURL}/media`;\r\n  private apiFS: string = environment.apiFS;\r\n  options: HttpHeaders = new HttpHeaders();\r\n  session: any = {};\r\n  private tokenApiFileSystem: string = 'Bearer 0e507c4210df1877ef0e8eddc2f10c5b';\r\n\r\n  constructor(private http: HttpClient, private loggerService: LoggerService, private authService: AuthService) {\r\n    this.options = new HttpHeaders( {'Content-Type': 'application/json', 'x-access-token': localStorage.getItem('tokenUserLogged')} );\r\n  }\r\n\r\n  private logError (error, operation) {\r\n    let message = '';\r\n    let reload = false;\r\n    if (error.status === 404) {\r\n      message = 'Falha ao se comunicar com a API: Rota não encontrada (ERRO 404)';\r\n    } else if (error.status === 401) {\r\n      message = 'Falha ao se comunicar com a API: Token inválido ou expirado';\r\n      reload = this.authService.logoff();\r\n    } else if (error.status === 400) {\r\n      message = `Os dados enviados são inválidos! \\nCausa do erro: ${error.error.details[0].message}`;\r\n    } else if (error.status >= 500 && error.status <= 505) {\r\n      message = `Houve algum erro no servidor! Entre em contato com o administrador!`;\r\n    } else {\r\n      message = error.Message;\r\n    }\r\n    console.log(error);\r\n    this.loggerService.add(`MediaService failed on operation: ${operation}\\nMessage: ${message}`);\r\n    if (reload) {\r\n      location.reload();\r\n    }\r\n  }\r\n\r\n  private log (mensagem: string) {\r\n    this.loggerService.add('MediaService: ' + mensagem);\r\n  }\r\n\r\n  addPhoto (photo: any, mediaType: string): Observable<any> {\r\n    let formData = new FormData();\r\n    formData.append('urlObjeto', photo);\r\n    return this.http.post(`${this.apiURL}/${mediaType}`, formData, { headers: new HttpHeaders({ 'x-access-token': localStorage.getItem('tokenUserLogged')}) }).pipe(\r\n      tap((response: any) => this.log(`media added`)),\r\n      catchError(this.handleError<any>('addPhoto'))\r\n    );\r\n  }\r\n\r\n  getMedias (type: string): Observable<any> {\r\n    return this.http.get(`${this.apiFS}/siteviruscursinho/${type}`, { headers: new HttpHeaders({ 'Authorization': this.tokenApiFileSystem, 'x-access-token': localStorage.getItem('tokenUserLogged')}) }).pipe(\r\n      tap(medias => this.log(`fetched medias`)),\r\n      catchError(this.handleError('getMedias', []))\r\n    )\r\n  }\r\n\r\n  removeFile (file: string, mediaType: string): Observable<any> {\r\n    return this.http.delete(`${this.apiFS}/v1/folders/siteviruscursinho/subfolders/${mediaType}/object/${file}`, { headers: new HttpHeaders({'Authorization': this.tokenApiFileSystem }) }).pipe(\r\n      tap(_ => this.log(`media removed`)),\r\n      catchError(this.handleError<any>('removeFile'))\r\n    );\r\n  }\r\n\r\n  private handleError<T> (operation = 'operation', result?: T) {\r\n    return (error: any): Observable<T> => {\r\n      this.logError(error, operation);\r\n      return of(result as T);\r\n    };\r\n  }\r\n\r\n}","module.exports = \"#modal {\\r\\n    border: 1px solid black;\\r\\n    padding: 15px;\\r\\n    margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.btn-tab {\\r\\n    width: 100%;\\r\\n    margin-top: 5px;\\r\\n    margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n#input-file {\\r\\n    width: 50%;\\r\\n    margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.thumbnail {\\r\\n    width: 100%;\\r\\n    height: 150px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.object {\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.objects {\\r\\n    height: 400px;\\r\\n    overflow-y: auto;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcm9sZXMvYWRtaW4tYXJlYS9jb21wb25lbnRzL21lZGlhLXNlbGVjdG9yL21lZGlhLXNlbGVjdG9yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSx1QkFBdUI7SUFDdkIsYUFBYTtJQUNiLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxlQUFlO0lBQ2Ysa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGFBQWE7SUFDYixnQkFBZ0I7QUFDcEIiLCJmaWxlIjoic3JjL2FwcC9yb2xlcy9hZG1pbi1hcmVhL2NvbXBvbmVudHMvbWVkaWEtc2VsZWN0b3IvbWVkaWEtc2VsZWN0b3IuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNtb2RhbCB7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4uYnRuLXRhYiB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5cclxuI2lucHV0LWZpbGUge1xyXG4gICAgd2lkdGg6IDUwJTtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi50aHVtYm5haWwge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDE1MHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ub2JqZWN0IHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLm9iamVjdHMge1xyXG4gICAgaGVpZ2h0OiA0MDBweDtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbn0iXX0= */\"","module.exports = \"<div id=\\\"modal\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"alert alert-{{ alert.type }}\\\" role=\\\"alert\\\" *ngIf=\\\"alert.show\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\" (click)=\\\"alert.show = false\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>{{ alert.message }}</div>\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-2\\\">\\r\\n      <button type=\\\"button\\\" class=\\\"btn-tab\\\" (click)=\\\"tabIndex = 1\\\">Computador</button>\\r\\n      <button type=\\\"button\\\" class=\\\"btn-tab\\\" (click)=\\\"tabIndex = 2\\\">Externo</button>\\r\\n      <button type=\\\"button\\\" class=\\\"btn-tab\\\" (click)=\\\"getObjects()\\\">Galeria</button>\\r\\n    </div>\\r\\n    <div class=\\\"col-md-10\\\" *ngIf=\\\"tabIndex === 1\\\">\\r\\n      <h4>Computador</h4>\\r\\n      <p>Carregue uma imagem do seu computador para a galeria.</p>\\r\\n      <input type=\\\"file\\\" id=\\\"input-file\\\" #file>\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-md btn-default\\\" (click)=\\\"uploadFile(file.files[0])\\\">Enviar</button>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-10\\\" *ngIf=\\\"tabIndex === 2\\\">\\r\\n      <h4>Externo</h4>\\r\\n      <p>Digite abaixo a URL da imagem externa.</p>\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <input type=\\\"text\\\" #link>\\r\\n      </div>\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-md btn-default\\\" (click)=\\\"setLinkPhoto(link.value)\\\">Enviar</button>\\r\\n    </div>\\r\\n    <div class=\\\"col-xs-10\\\" *ngIf=\\\"tabIndex === 3\\\">\\r\\n      <h4>Galeria</h4>\\r\\n      <p>Selecione uma imagem da galeria de imagens.</p>\\r\\n      <div class=\\\"row objects\\\">\\r\\n        <div class=\\\"col-md-3\\\" *ngFor=\\\"let object of objects\\\">\\r\\n          <div class=\\\"object\\\" *ngIf=\\\"object.type === 'image'\\\">\\r\\n            <img (click)=\\\"setLinkPhoto(object.url)\\\" src=\\\"{{ object.url }}\\\" class=\\\"thumbnail\\\">\\r\\n            <span (click)=\\\"removeFile(object.url)\\\" class=\\\"glyphicon glyphicon-remove text-danger\\\"></span>\\r\\n          </div>\\r\\n          <div class=\\\"object\\\" *ngIf=\\\"object.type === 'spreadsheet'\\\">\\r\\n            <img (click)=\\\"setLinkPhoto(object.url)\\\" src=\\\"../../../../../assets/img/icons/spreadsheet.png\\\" class=\\\"thumbnail\\\">\\r\\n            <p>{{ object.name }}</p>\\r\\n            <span (click)=\\\"removeFile(object.url)\\\" class=\\\"glyphicon glyphicon-remove text-danger\\\"></span>\\r\\n          </div>\\r\\n          <div class=\\\"object\\\" *ngIf=\\\"object.type === 'wordprocessor'\\\">\\r\\n            <img (click)=\\\"setLinkPhoto(object.url)\\\" src=\\\"../../../../../assets/img/icons/document.png\\\" class=\\\"thumbnail\\\">\\r\\n            <p>{{ object.name }}</p>\\r\\n            <span (click)=\\\"removeFile(object.url)\\\" class=\\\"glyphicon glyphicon-remove text-danger\\\"></span>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <hr>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <div class=\\\"form-group btn-group\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-md btn-default\\\" (click)=\\\"setLinkPhoto('')\\\">Concluir</button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\n\r\nimport { MediaService } from '../../angular-services/media.service';\r\nimport { environment } from '../../../../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-media-selector',\r\n  templateUrl: './media-selector.component.html',\r\n  styleUrls: ['./media-selector.component.css']\r\n})\r\nexport class MediaSelectorComponent implements OnInit {\r\n\r\n  @Output() urlObject = new EventEmitter<string>();\r\n  @Input('mediaType') mediaType: string;\r\n  alert: any = { type: '', message: '', show: false };\r\n  urlObjects: string = '';\r\n  showModalSelectFile: boolean = false;\r\n  tabIndex: number = 1;\r\n  objects: any[] = [];\r\n  sizePage: number = 8;\r\n  pageSelected: number = 0;\r\n  pages: any[] = [];\r\n\r\n  constructor(private mediaService: MediaService) { }\r\n\r\n  ngOnInit() {\r\n    this.urlObjects = `${environment.apiFS}/siteviruscursinho/${this.mediaType}`;\r\n  }\r\n\r\n  uploadFile(file) {\r\n    this.mediaService.addPhoto(file, this.mediaType).subscribe(\r\n      response => {\r\n        if (response !== undefined) {\r\n          if (response.Body !== undefined) {\r\n            this.alert.type = 'success';\r\n            this.alert.message = 'Arquivo enviado com sucesso!';\r\n            this.alert.show = true;\r\n            this.showModalSelectFile = false;\r\n            this.urlObject.emit(response.Body.urlObject);\r\n          } else {\r\n            this.alert.type = 'danger';\r\n            this.alert.message = 'Houve algum erro ao salvar mídia!';\r\n            this.alert.show = true;\r\n          }\r\n        } else {\r\n          this.alert.type = 'danger';\r\n          this.alert.message = 'Houve algum erro ao salvar mídia!';\r\n          this.alert.show = true;\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  setLinkPhoto(link) {\r\n    this.alert.type = 'success';\r\n    this.alert.message = 'Arquivo carregado com sucesso!';\r\n    this.alert.show = true;\r\n    this.showModalSelectFile = false;\r\n    this.urlObject.emit(link);\r\n  }\r\n\r\n  getObjects() {\r\n    this.tabIndex = 3;\r\n    this.mediaService.getMedias(this.mediaType).subscribe(\r\n      response => {\r\n        if (response !== undefined) {\r\n          for (let o of response) {\r\n            let obj = { url: `${this.urlObjects}/${o.name}`, name: o.name, type: '' };\r\n            if (o.name.search('.png') > -1 || o.name.search('.jpeg') > -1 || o.name.search('.jpg') > -1 || o.name.search('.gif') > -1 || o.name.search('.PNG') > -1 || o.name.search('.JPEG') > -1 || o.name.search('.JPG') > -1 || o.name.search('.GIF') > -1) {\r\n              obj.type = 'image';\r\n            } else if (o.name.search('.xls') > -1 || o.name.search('.xlt') > -1 || o.name.search('.xlsx') > -1 || o.name.search('.XLS') > -1 || o.name.search('.XLT') > -1 || o.name.search('.XLSX') > -1) {\r\n              obj.type = 'spreadsheet';\r\n            } else if (o.name.search('.doc') > -1 || o.name.search('.docx') > -1 || o.name.search('.odt') > -1 || o.name.search('.DOC') > -1 || o.name.search('.DOCX') > -1 || o.name.search('.ODT') > -1) {\r\n              obj.type = 'wordprocessor';\r\n            }\r\n            this.objects.push(obj);\r\n          }\r\n        } else {\r\n          this.alert.type = 'danger';\r\n          this.alert.message = 'Houve algum erro ao salvar os dados!';\r\n          this.alert.show = true;\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  removeFile(link) {\r\n    let obj = '';\r\n    for (let i=link.lastIndexOf('/')+1;i<link.length;i++) { \r\n      obj = obj + link[i]; \r\n    } \r\n    let result = obj.replace('%20', ' '); \r\n    console.log(result);\r\n    this.mediaService.removeFile(result, this.mediaType).subscribe(\r\n      response => {\r\n        if (response !== undefined) {\r\n          this.alert.type = 'success';\r\n          this.alert.message = 'Arquivo removido com sucesso!';\r\n          this.alert.show = true;\r\n        } else {\r\n          this.alert.type = 'danger';\r\n          this.alert.message = 'Houve algum erro ao salvar os dados!';\r\n          this.alert.show = true;\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MediaSelectorComponent } from './media-selector.component';\r\nimport { MediaService } from '../../angular-services/media.service';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    MediaSelectorComponent\r\n  ],\r\n  exports:[\r\n    MediaSelectorComponent\r\n  ],\r\n  providers: [\r\n    MediaService\r\n  ]\r\n})\r\nexport class MediaSelectorModule { }\r\n"],"sourceRoot":""}